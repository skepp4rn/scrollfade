
(function($,window,document,undefined){"use strict";

var scrollie="scrollie",defaults={parentElement:window,
direction:"both",
scrollOffset:0,
scrollRatio:2,scrollingInView:null,
scrollingToTheTop:null,
scrollingOutOfView:null,
scrolledOutOfView:null};
function Plugin(element,options){this.element=element;this.settings=$.extend({},defaults,options);this._defaults=defaults;this._name=scrollie;this.init()}Plugin.prototype={init:function(){this._defineElements();this._scrollEvent()},_defineElements:function(){var self=this;self.$scrollElement=$(self.element);self.$elemHeight=self.$scrollElement.outerHeight();self.$elemPosTop=self.$scrollElement.offset().top;
self.$scrollOffset=self.$scrollElement.data("scrollie-offset")||self.$scrollElement.data("scrollie-offset")=="0"?self.$scrollElement.data("scrollie-offset"):self.settings.scrollOffset;
self.$scrollRatio=self.$scrollElement.data("scrollie-scrollRatio")||self.$scrollElement.data("scrollie-scrollRatio")=="0"?self.$scrollElement.data("scrollie-scrollRatio"):self.settings.scrollRatio},_inMotion:function(winPos,winHeight,thisTop,direction){var self=this,coords=((winPos-thisTop)*-1-winHeight)*-1,scrollRatio=coords/2,movedOut=coords<winHeight+self.$elemHeight,movingIn=coords>0-self.$scrollOffset,movingToTheTop=movingIn&&coords<winHeight,movingThrough=movingIn&&movedOut,atTheTop=coords>winHeight-self.$scrollOffset&&movedOut;

if(movingToTheTop){
jQuery.isFunction(self.settings.scrollingToTheTop)&&self.settings.scrollingToTheTop.call(this,this.$scrollElement,self.$scrollOffset,direction,coords,scrollRatio,thisTop,winPos)}

if(movingThrough){
jQuery.isFunction(self.settings.scrollingInView)&&self.settings.scrollingInView.call(this,this.$scrollElement,self.$scrollOffset,direction,coords,scrollRatio,thisTop,winPos)}


if(atTheTop){
jQuery.isFunction(self.settings.scrollingOutOfView)&&self.settings.scrollingOutOfView.call(this,this.$scrollElement,self.$scrollOffset,direction,coords,scrollRatio,thisTop,winPos)}

if(!movedOut){jQuery.isFunction(self.settings.scrolledOutOfView)&&self.settings.scrolledOutOfView.call(this,this.$scrollElement,self.$scrollOffset,direction,coords,scrollRatio,thisTop,winPos)}},_scrollEvent:function(){var self=this,direction=self.settings.direction,lastScrolPos=0,scroll_ok=true;setInterval(function(){scroll_ok=true},66);
$(self.settings.parentElement).on("scroll",function(){var windowPos=$(this).scrollTop(),winHeight=$(this).height(),currentDirection=windowPos>lastScrolPos?"up":"down";
if(currentDirection===direction&&scroll_ok===true){scroll_ok=false;
self._inMotion(windowPos,winHeight,self.$elemPosTop,currentDirection)}else if(direction==="both"&&scroll_ok===true){scroll_ok=false;self._inMotion(windowPos,winHeight,self.$elemPosTop,currentDirection)}lastScrolPos=windowPos})}};

$.fn[scrollie]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+scrollie)){$.data(this,"plugin_"+scrollie,new Plugin(this,options))}})}})(jQuery,window,document);